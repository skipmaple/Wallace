# Wallace v4.2 采购清单（基于现有器件）\n\n> 说明：本清单依据 v4.2 BOM 与当前器件库存对比整理。\n> **v4.2 更新**：开发板升级为 ESP32-S3 N32R16V（32MB Flash + 16MB PSRAM），提供更充裕的存储空间和内存资源。\n\n## 一、确定需要购买（核心必选缺口）\n\n| 物品 | 数量 | 参考价/件 | 备注 |\n|---|---:|---:|---|\n| ESP32-S3 开发板 N32R16V | 2 | ¥45–65 | 需 N32R16V，Type‑C，双 USB，32MB Flash + 16MB PSRAM |\n| INMP441 麦克风 | 1 | ¥8–12 | 现有 1 个，补 1 个 |\n| MAX98357A 功放 | 2 | ¥6–10 | I2S 功放 |\n| TP4056 充电模块 | 2 | ¥3–5 | Type‑C 带保护 |\n| MT3608 升压模块 | 2 | ¥2–4 | 升压到 5V |\n| WS2812B 环形灯带 | 1 | ¥5–10 | 12 颗/环 |\n| TTP223 触摸模块 | 2 | ¥1–2 | 备用唤醒 |\n| 100μF 电解电容 | 5 | ¥1（整包） | 升压滤波 |\n| 杜邦线 + 排针 | 1 批 | ¥10 | 尽量短 |\n\n## 二、待确认后再决定\n\n| 物品 | 数量 | 参考价/件 | 需要确认 |\n|---|---:|---:|---|\n| GC9A01 1.28 寸圆屏 | 1 | ¥15–25 | 你现有为 1.28 寸圆屏，需确认驱动芯片是否 GC9A01 |\n| 18650 电池 + 电池盒 | 1 组 | ¥15–25 | 你已有 18650 电池与电池盒，容量与串并方式确认 |\n| SS12D00 拨动开关 | 5 | ¥0.5 | 可用现有 KCD1/PBS/SS12D10 替代，尺寸确认 |\n| 4Ω3W 带腔体喇叭 | 1 | ¥5–10 | 你有 4Ω3W 喇叭，需确认是否带音腔 |\n\n## 三、可选扩展（按功能选择）\n\n| 物品 | 数量 | 参考价/件 | 功能 |\n|---|---:|---:|---|\n| VL53L0X | 1 | ¥8–12 | 眼神追踪 |\n| DHT22 | 1 | ¥8–12 | 温湿度 |\n| BH1750 | 1 | ¥3–5 | 光线感应 |\n| OV2640 | 1 | ¥15–20 | 人脸检测（你现有 OV7670 不兼容） |\n| MQ‑135 | 1 | ¥8–12 | 空气质量 |\n| SD 卡模块 | 1 | ¥3–5 | 本地存储（你已有，可不买） |\n| MPU6050 | 1 | ¥5–8 | 摇一摇彩蛋（你已有，可不买） |\n| 物理按钮 | 2 | ¥0.5 | 彩蛋触发（你已有轻触开关盒） |\n\n## 四、v4.2 配置变更说明\n\n### 开发板升级：N16R8 → N32R16V\n\n| 规格 | v4.1 (N16R8) | v4.2 (N32R16V) |\n|---|---|---|\n| Flash | 16MB | 32MB |\n| PSRAM | 8MB | 16MB |\n| 参考价格 | ¥35–50 | ¥45–65 |\n\n### 升级优势\n\n1. **更大的 Flash 空间**：可存储更大的语音模型、更多音效资源\n2. **更充裕的 PSRAM**：支持更复杂的动画缓存、更流畅的多任务处理\n3. **扩展潜力**：为未来功能升级预留空间\n\n### 配置调整\n\n使用 N32R16V 时，需在 `platformio.ini` 中调整以下配置：\n\n```ini\n; platformio.ini (v4.2 N32R16V 配置)\n[env:esp32s3]\nplatform = espressif32\nboard = esp32-s3-devkitc-1\nframework = espidf\n\n; 锁定 ESP-IDF 版本（与 ESP-SR/ESP-ADF 兼容）\nplatform_packages =  \n    framework-espidf @ ~5.1.0\n\n; PSRAM 配置（N32R16V）\nboard_build.arduino.memory_type = qio_opi\nboard_build.psram_mode = opi\n\n; Flash 配置（32MB）\nboard_upload.flash_size = 32MB\n\n; 串口配置\nmonitor_speed = 115200\nupload_speed = 921600\n\n; 额外组件路径（ESP-SR、ESP-ADF 等）\nboard_build.cmake_extra_args =  \n    -DEXTRA_COMPONENT_DIRS=${PROJECT_DIR}/components\n\n; 分区表（为语音模型预留更大空间）\nboard_build.partitions = partitions_v42.csv\n```\n\n> 注意：以上分区表利用了 N32R16V 更大的 Flash 空间，为固件、模型和存储分配了更充裕的容量.
